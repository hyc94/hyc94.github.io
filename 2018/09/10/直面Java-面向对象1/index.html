<!DOCTYPE html><html><head><meta name="generator" content="Hexo 3.8.0"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><title>直面Java-面向对象1 | Hyc的博客</title><meta name="description" content=""><meta name="keywords" content=""><meta name="HandheldFriendly" content="True"><meta name="apple-mobile-web-app-capable" content="yes"><link rel="shortcut icon" href="/"><link rel="alternate" href="/atom.xml" title="Hyc的博客"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta name="description" content="这个系列是关于Java基础的知识点，常用于面试。  面向对象的三大基本特征和五大基本原则 为什么说Java只有值传递 Java的编译和反编译方法"><meta name="keywords" content="Java"><meta property="og:type" content="article"><meta property="og:title" content="直面Java-面向对象1"><meta property="og:url" content="http://yoursite.com/2018/09/10/直面Java-面向对象1/index.html"><meta property="og:site_name" content="Hyc的博客"><meta property="og:description" content="这个系列是关于Java基础的知识点，常用于面试。  面向对象的三大基本特征和五大基本原则 为什么说Java只有值传递 Java的编译和反编译方法"><meta property="og:locale" content="default"><meta property="og:image" content="http://yoursite.com/2018/09/10/直面Java-面向对象1/image1.webp"><meta property="og:image" content="http://yoursite.com/2018/09/10/直面Java-面向对象1/image2.webp"><meta property="og:updated_time" content="2018-11-21T13:36:41.584Z"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="直面Java-面向对象1"><meta name="twitter:description" content="这个系列是关于Java基础的知识点，常用于面试。  面向对象的三大基本特征和五大基本原则 为什么说Java只有值传递 Java的编译和反编译方法"><meta name="twitter:image" content="http://yoursite.com/2018/09/10/直面Java-面向对象1/image1.webp"><link href="https://fonts.googleapis.com/css?family=Inconsolata|Titillium+Web" rel="stylesheet"><link href="https://fonts.googleapis.com/css?family=Roboto+Mono" rel="stylesheet"><link href="//cdn.bootcss.com/node-waves/0.7.5/waves.min.css" rel="stylesheet"><link rel="stylesheet" href="/style.css"><script>function setLoadingBarProgress(e){document.getElementById("loading-bar").style.width=e+"%"}</script></head></html><body><div id="loading-bar-wrapper"><div id="loading-bar"></div></div><script>setLoadingBarProgress(20)</script><header class="l_header"><div class="wrapper"><div class="nav-main container container--flex"><a class="logo flat-box" href="/">Hyc的博客</a><div class="menu"><ul class="h-list"><li><a class="flat-box nav-home" href="/">Home</a></li><li><a class="flat-box nav-archives" href="/archives">Archives</a></li></ul><div class="underline"></div></div><div class="m_search"><form name="searchform" class="form u-search-form"><input type="text" class="input u-search-input" placeholder="Search"> <span class="icon icon-search"></span></form></div><ul class="switcher h-list"><li class="s-search"><a href="javascript:void(0)"><span class="icon icon-search flat-box"></span></a></li><li class="s-menu"><a href="javascript:void(0)"><span class="icon icon-menu flat-box"></span></a></li></ul></div><div class="nav-sub container container--flex"><a class="logo" href="javascript:void(0)">Word of Forks</a><ul class="switcher h-list"><li class="s-comment"><a href="javascript:void(0)"><span class="icon icon-chat_bubble_outline flat-box"></span></a></li><li class="s-top"><a href="javascript:void(0)"><span class="icon icon-arrow_upward flat-box"></span></a></li><li class="s-toc"><a href="javascript:void(0)"><span class="icon icon-format_list_numbered flat-box"></span></a></li></ul></div></div></header><aside class="menu-phone"><nav><a href="/" class="nav-home nav">Home </a><a href="/archives" class="nav-archives nav">Archives</a></nav></aside><script>setLoadingBarProgress(40)</script><div class="l_body"><div class="container clearfix"><div class="l_main"><article id="post-直面Java-面向对象1" class="post white-box article-type-post" itemscope itemprop="blogPost"><section class="meta"><h2 class="title"><a href="/2018/09/10/直面Java-面向对象1/">直面Java-面向对象1</a></h2><time>Sep 10, 2018</time><div class="cats"><a href="/categories/后端/">后端</a></div></section><section class="toc-wrapper"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#面向对象的三大基本特征和五大基本原则"><span class="toc-number">1.</span> <span class="toc-text">面向对象的三大基本特征和五大基本原则</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#为什么说Java只有值传递"><span class="toc-number">2.</span> <span class="toc-text">为什么说Java只有值传递</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#实参和形参"><span class="toc-number">2.0.1.</span> <span class="toc-text">实参和形参</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#值传递和引用传递"><span class="toc-number">2.0.2.</span> <span class="toc-text">值传递和引用传递</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Java中的值传递"><span class="toc-number">2.0.3.</span> <span class="toc-text">Java中的值传递</span></a></li></ol></li></ol><li class="toc-item toc-level-2"><a class="toc-link" href="#Java的编译和反编译方法"><span class="toc-number">3.</span> <span class="toc-text">Java的编译和反编译方法</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#参考链接"><span class="toc-number">4.</span> <span class="toc-text">参考链接:</span></a></li></section><section class="article typo"><div class="article-entry" itemprop="articleBody"><p>这个系列是关于Java基础的知识点，常用于面试。</p><ul><li>面向对象的三大基本特征和五大基本原则</li><li>为什么说Java只有值传递</li><li>Java的编译和反编译方法</li></ul><hr><a id="more"></a><h2 id="面向对象的三大基本特征和五大基本原则"><a href="#面向对象的三大基本特征和五大基本原则" class="headerlink" title="面向对象的三大基本特征和五大基本原则"></a>面向对象的三大基本特征和五大基本原则</h2><ul><li>三大基本特征：封装、继承、多态</li><li>五大基本原则：单一职责原则（Single-Responsibility Principle）、开放封闭原则（Open-Closed Principle）、Liskov替换原则（Liskov-Substituion Principle）、依赖倒置原则（Dependency-Inversion Principle）和接口隔离原则（Interface-Segregation Principle）<ul><li>单一职责原则：一个类最好只做一件事，只有一个引起它的变化</li><li>开放封闭原则：对扩展开放，对修改封闭</li><li>Liskov替换原则：子类必须能够替换其基类</li><li>依赖倒置原则：依赖于抽象</li><li>接口隔离原则：使用多个小的专门的接口，而不要使用一个大的总接口</li></ul></li></ul><h2 id="为什么说Java只有值传递"><a href="#为什么说Java只有值传递" class="headerlink" title="为什么说Java只有值传递"></a>为什么说Java只有值传递</h2><h4 id="实参和形参"><a href="#实参和形参" class="headerlink" title="实参和形参"></a>实参和形参</h4><ul><li>实参是调用有参方法的时候真正传递的内容</li><li>形参数用于接收实参内容的参数</li></ul><h4 id="值传递和引用传递"><a href="#值传递和引用传递" class="headerlink" title="值传递和引用传递"></a>值传递和引用传递</h4><ul><li>值传递指调用函数时将实际参数<strong>复制</strong>一份传递到函数中，这样在函数中对参数进行修改，将不会影响到实际参数</li><li>引用传递指调用函数时将实际参数的地址<strong>直接</strong>传递到函数中，那么在函数中对参数进行的修改，将影响到实际参数</li></ul><h4 id="Java中的值传递"><a href="#Java中的值传递" class="headerlink" title="Java中的值传递"></a>Java中的值传递</h4><p>​ 值传递和引用传递之间区别的重点是：</p><img src="/2018/09/10/直面Java-面向对象1/image1.webp" title="直面Java-面向对象1"><p>举一个例子：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">   ParamTest pt = <span class="keyword">new</span> ParamTest();</span><br><span class="line"></span><br><span class="line">   User hollis = <span class="keyword">new</span> User();</span><br><span class="line">   hollis.setName(<span class="string">"Hollis"</span>);</span><br><span class="line">   hollis.setGender(<span class="string">"Male"</span>);</span><br><span class="line">   pt.pass(hollis);</span><br><span class="line">   System.out.println(<span class="string">"print in main , user is "</span> + hollis);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">pass</span><span class="params">(User user)</span> </span>&#123;</span><br><span class="line">   user = <span class="keyword">new</span> User();</span><br><span class="line">   user.setName(<span class="string">"hollischuang"</span>);</span><br><span class="line">   user.setGender(<span class="string">"Male"</span>);</span><br><span class="line">   System.out.println(<span class="string">"print in pass , user is "</span> + user);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>上面代码的输出结果：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">print in pass , user is User&#123;name=<span class="string">'hollischuang'</span>, gender=<span class="string">'Male'</span>&#125;</span><br><span class="line">print in main , user is User&#123;name=<span class="string">'Hollis'</span>, gender=<span class="string">'Male'</span>&#125;</span><br></pre></td></tr></table></figure><img src="/2018/09/10/直面Java-面向对象1/image2.webp" title="直面Java-面向对象1"><p>从上图分析我们可以得知，这里是把实际参数的引用地址<strong>复制</strong>了一份，传递给了形式参数。<strong>所以，上面的参数其实是值传递，把实际参数引用的地址当做值传递给了形式参数。值传递和引用传递的区别并不是传递的内容，而是实参到底有没有复制一份给形参。</strong></p><p><strong>Java中其实还是值传递，对于对象参数，值的参数是对象的引用。</strong></p><h2 id="Java的编译和反编译方法"><a href="#Java的编译和反编译方法" class="headerlink" title="Java的编译和反编译方法"></a>Java的编译和反编译方法</h2><ul><li>编译指的是从高级语言转换成低级语言，将用高级计算机语言所写作的源代码程序，翻译为低阶机器语言的程序的过程就是编译，负责这一过程的工具叫做编译器。</li><li>反编译指的是将已编译好的低阶语言还原到未编译的状态，就是找到程序语言的源代码。Java语言中的反编译一般指将class文件转换成java文件。</li></ul><p>Java语言中负责编译的编译器是一个命令：javac。该工具可以将后缀为.java的源文件编译为后缀为.class的可以运行与Java虚拟机的字节码，再由JVM将这种class文件类型字节码转换成机器可以识别的机器码。</p><p>Java中反编译工具有多个，如<code>javap</code>，<code>jad</code>，<code>CRF</code>：</p><p><strong>javap</strong></p><p><code>javap</code>是jdk自带的一个工具，可以对代码反编译，也可以查看java编译器生成的字节码。<code>javap</code>和其他两个工具最大的区别是它生成的并不是java代码，不像其他两个工具生成的代码那样容易理解。</p><p>源代码：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.hyc.learn.demo.java;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SwitchDemoString</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        String str = <span class="string">"world"</span>;</span><br><span class="line">        <span class="keyword">switch</span> (str) &#123;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">"hello"</span>:</span><br><span class="line">                System.out.println(<span class="string">"hello"</span>);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">"world"</span>:</span><br><span class="line">                System.out.println(<span class="string">"world"</span>);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">default</span>:</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>执行<code>javap -c SwitchDemoString.class</code>结果：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line">Compiled from <span class="string">"SwitchDemoString.java"</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">com</span>.<span class="title">hyc</span>.<span class="title">learn</span>.<span class="title">demo</span>.<span class="title">java</span>.<span class="title">SwitchDemoString</span> </span>&#123;</span><br><span class="line">  <span class="keyword">public</span> com.hyc.learn.demo.java.SwitchDemoString();</span><br><span class="line">    Code:</span><br><span class="line">       <span class="number">0</span>: aload_0</span><br><span class="line">       1: invokespecial #1                  // Method java/lang/Object."&lt;init&gt;":()V</span><br><span class="line">       <span class="number">4</span>: <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(java.lang.String[])</span></span>;</span><br><span class="line">    Code:</span><br><span class="line">       0: ldc           #2                  // String world</span><br><span class="line">       <span class="number">2</span>: astore_1</span><br><span class="line">       <span class="number">3</span>: aload_1</span><br><span class="line">       <span class="number">4</span>: astore_2</span><br><span class="line">       <span class="number">5</span>: iconst_m1</span><br><span class="line">       <span class="number">6</span>: istore_3</span><br><span class="line">       <span class="number">7</span>: aload_2</span><br><span class="line">       8: invokevirtual #3                  // Method java/lang/String.hashCode:()I</span><br><span class="line">      <span class="number">11</span>: lookupswitch  &#123; <span class="comment">// 2</span></span><br><span class="line">              <span class="number">99162322</span>: <span class="number">36</span></span><br><span class="line">             <span class="number">113318802</span>: <span class="number">50</span></span><br><span class="line">               <span class="keyword">default</span>: <span class="number">61</span></span><br><span class="line">          &#125;</span><br><span class="line">      <span class="number">36</span>: aload_2</span><br><span class="line">      37: ldc           #4                  // String hello</span><br><span class="line">      39: invokevirtual #5                  // Method java/lang/String.equals:(Ljava/lang/Object;)Z</span><br><span class="line">      <span class="number">42</span>: ifeq          <span class="number">61</span></span><br><span class="line">      <span class="number">45</span>: iconst_0</span><br><span class="line">      <span class="number">46</span>: istore_3</span><br><span class="line">      <span class="number">47</span>: goto          <span class="number">61</span></span><br><span class="line">      <span class="number">50</span>: aload_2</span><br><span class="line">      51: ldc           #2                  // String world</span><br><span class="line">      53: invokevirtual #5                  // Method java/lang/String.equals:(Ljava/lang/Object;)Z</span><br><span class="line">      <span class="number">56</span>: ifeq          <span class="number">61</span></span><br><span class="line">      <span class="number">59</span>: iconst_1</span><br><span class="line">      <span class="number">60</span>: istore_3</span><br><span class="line">      <span class="number">61</span>: iload_3</span><br><span class="line">      <span class="number">62</span>: lookupswitch  &#123; <span class="comment">// 2</span></span><br><span class="line">                     <span class="number">0</span>: <span class="number">88</span></span><br><span class="line">                     <span class="number">1</span>: <span class="number">99</span></span><br><span class="line">               <span class="keyword">default</span>: <span class="number">110</span></span><br><span class="line">          &#125;</span><br><span class="line">      88: getstatic     #6                  // Field java/lang/System.out:Ljava/io/PrintStream;</span><br><span class="line">      91: ldc           #4                  // String hello</span><br><span class="line">      93: invokevirtual #7                  // Method java/io/PrintStream.println:(Ljava/lang/String;)V</span><br><span class="line">      <span class="number">96</span>: goto          <span class="number">110</span></span><br><span class="line">      99: getstatic     #6                  // Field java/lang/System.out:Ljava/io/PrintStream;</span><br><span class="line">     102: ldc           #2                  // String world</span><br><span class="line">     104: invokevirtual #7                  // Method java/io/PrintStream.println:(Ljava/lang/String;)V</span><br><span class="line">     <span class="number">107</span>: goto          <span class="number">110</span></span><br><span class="line">     <span class="number">110</span>: <span class="keyword">return</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>从上面结果看，<code>javap</code>并没有将字节码反编译成java代码，而是生成了一种我们看得懂的字节码。其实<code>javap</code>生成的文件仍然是字节码。上面的字节码其实是把String转成hashcode，然后进行比较。</p><p><strong>jad</strong></p><p>jad是一个不错的反编译工具，只要下载一个可执行程序，就可以对class文件进行反编译。上面的源代码使用jad反编译结果如下：</p><p>运行命令：<code>jad switchDemoString.class</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Decompiled by Jad v1.5.8g. Copyright 2001 Pavel Kouznetsov.</span></span><br><span class="line"><span class="comment">// Jad home page: http://www.kpdus.com/jad.html</span></span><br><span class="line"><span class="comment">// Decompiler options: packimports(3) </span></span><br><span class="line"><span class="comment">// Source File Name:   SwitchDemoString.java</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">package</span> com.hyc.learn.demo.java;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.PrintStream;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SwitchDemoString</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">SwitchDemoString</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        String str = <span class="string">"world"</span>;</span><br><span class="line">        String s = str;</span><br><span class="line">        <span class="keyword">byte</span> byte0 = -<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">switch</span>(s.hashCode())</span><br><span class="line">        &#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">99162322</span>: </span><br><span class="line">            <span class="keyword">if</span>(s.equals(<span class="string">"hello"</span>))</span><br><span class="line">                byte0 = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">case</span> <span class="number">113318802</span>: </span><br><span class="line">            <span class="keyword">if</span>(s.equals(<span class="string">"world"</span>))</span><br><span class="line">                byte0 = <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">switch</span>(byte0)</span><br><span class="line">        &#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">0</span>: <span class="comment">// '\0'</span></span><br><span class="line">            System.out.println(<span class="string">"hello"</span>);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">case</span> <span class="number">1</span>: <span class="comment">// '\001'</span></span><br><span class="line">            System.out.println(<span class="string">"world"</span>);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>这个代码块就很清晰，很清楚的看到<strong>字符串的switch就是通过<code>equals()</code>和<code>hashcode()</code>方法实现的</strong>。</p><p>但是，jad已经很久没有更新了，官网提示不再更新了，不建议使用了。</p><p><strong>CRF</strong></p><p>jad虽然很好用，但是无奈已经停止更新，所以只能用新的工具去替代它，CFR是一个不错的选择，相比jad，它的语法会稍微复杂一些，但是也可以使用。</p><p>如，对上面的源代码进行反编译，输入以下命令：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java -jar cfr_0_131.jar SwitchDemoString.class  --decodestringswitch false</span><br></pre></td></tr></table></figure><p>结果如下：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * Decompiled with CFR 0_131.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">package</span> com.hyc.learn.demo.java;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.PrintStream;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SwitchDemoString</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        String str;</span><br><span class="line">        String string = str = <span class="string">"world"</span>;</span><br><span class="line">        <span class="keyword">int</span> n = -<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">switch</span> (string.hashCode()) &#123;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">99162322</span>: &#123;</span><br><span class="line">                <span class="keyword">if</span> (!string.equals(<span class="string">"hello"</span>)) <span class="keyword">break</span>;</span><br><span class="line">                n = <span class="number">0</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">113318802</span>: &#123;</span><br><span class="line">                <span class="keyword">if</span> (!string.equals(<span class="string">"world"</span>)) <span class="keyword">break</span>;</span><br><span class="line">                n = <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">switch</span> (n) &#123;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">0</span>: &#123;</span><br><span class="line">                System.out.println(<span class="string">"hello"</span>);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">1</span>: &#123;</span><br><span class="line">                System.out.println(<span class="string">"world"</span>);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>通过上面的结果也可以看出字符串的switch是用<code>hashcode()</code>和<code>equal()</code>方法实现的。</p><p>和jad相比，CFR有很多参数，上面的代码用以下的命令输出结果就是不一样的：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">java -jar cfr_0_131.jar SwitchDemoString.class</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * Decompiled with CFR 0_131.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">package</span> com.hyc.learn.demo.java;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.PrintStream;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SwitchDemoString</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        String str;</span><br><span class="line">        <span class="keyword">switch</span> (str = <span class="string">"world"</span>) &#123;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">"hello"</span>: &#123;</span><br><span class="line">                System.out.println(<span class="string">"hello"</span>);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">"world"</span>: &#123;</span><br><span class="line">                System.out.println(<span class="string">"world"</span>);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>参数<code>--decodestringswitch</code>表示对于switch支持string的原理进行解码。类似的还有<code>--decodeenumswitch</code>、<code>--decodefinally</code>、<code>--decodelambdas</code>。CFR还有很多其他的参数，可以使用<code>java -jar cfr_0_131.jar --help</code>进行了解</p><p><strong>如何防止反编译</strong></p><p>对于反编译来讲，其实和网络安全的防护，只能提高攻击者的成本而已，并不能彻底防治。</p><p>应对策略有以下几种：</p><ul><li>隔离应用程序<ul><li>让用户接触不到Class文件</li></ul></li><li>对Class文件进行加密<ul><li>提高破解难度</li></ul></li><li>代码混淆<ul><li>将代码转化为功能上等价，但是难以阅读和理解的形式。</li></ul></li></ul><h2 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接:"></a>参考链接:</h2><p><a href="http://www.hollischuang.com/archives/220" target="_blank" rel="noopener">http://www.hollischuang.com/archives/220</a></p><p><a href="https://mp.weixin.qq.com/s/F7Niaa7nD1tLApCEGKAj4A" target="_blank" rel="noopener">https://mp.weixin.qq.com/s/F7Niaa7nD1tLApCEGKAj4A</a></p></div><div class="article-tags tags"><a href="/tags/Java/">Java</a></div><div class="art-item-footer"><span class="art-item-left"><i class="icon icon-chevron-thin-left"></i>prev：<a href="/2018/11/20/kubernetes安装/" rel="prev" title="使用kubeadm安装Kubernetes"> 使用kubeadm安装Kubernetes </a></span><span class="art-item-right">next：<a href="/2018/04/19/一次RabbitMQ线上故障记录/" rel="next" title="一次RabbitMQ线上故障记录"> 一次RabbitMQ线上故障记录 </a><i class="icon icon-chevron-thin-right"></i></span></div></section></article><script>window.subData={title:"直面Java-面向对象1",tools:!0}</script></div><aside class="l_side"><section class="m_widget about"><div class="header">Hyc</div><div class="content"><div class="desc">Tempora mutantur, nos et mutamur in illis ...</div></div></section><section class="m_widget links"><div class="header">Links</div><div class="content"><ul class="entry"></ul></div></section><section class="m_widget categories"><div class="header">Categories</div><div class="content"><ul class="entry"><li><a class="flat-box" href="/categories/前端/"><div class="name">前端</div><div class="badget">1</div></a></li><li><a class="flat-box" href="/categories/后端/"><div class="name">后端</div><div class="badget">1</div></a></li><li><a class="flat-box" href="/categories/运维/"><div class="name">运维</div><div class="badget">2</div></a></li></ul></div></section><div class="m_widget tagcloud"><div class="header">Tags</div><div class="content"><a href="/tags/Java/" style="font-size:14px;color:grey">Java</a> <a href="/tags/JavaScript/" style="font-size:14px;color:grey">JavaScript</a> <a href="/tags/devops/" style="font-size:14px;color:grey">devops</a> <a href="/tags/mq/" style="font-size:14px;color:grey">mq</a></div></div></aside><script>setLoadingBarProgress(60)</script></div></div><footer id="footer" class="clearfix"><div class="social-wrapper"><a href="https://github.com/stkevintan" class="social github" target="_blank" rel="external"><span class="icon icon-github"></span> </a><a href="/atom.xml" class="social rss" target="_blank" rel="external"><span class="icon icon-rss"></span></a></div><div>Theme <a href="https://github.com/stkevintan/hexo-theme-material-flow" class="codename">MaterialFlow</a> designed by <a href="http://keyin.me/" target="_blank">Kevin Tan</a>.</div></footer><script>setLoadingBarProgress(80)</script><script src="//apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js"></script><script src="//cdn.bootcss.com/node-waves/0.7.5/waves.min.js"></script><script src="//cdn.bootcss.com/scrollReveal.js/3.3.2/scrollreveal.min.js"></script><script src="/js/jquery.fitvids.js"></script><script>var GOOGLE_CUSTOM_SEARCH_API_KEY="",GOOGLE_CUSTOM_SEARCH_ENGINE_ID="",ALGOLIA_API_KEY="",ALGOLIA_APP_ID="",ALGOLIA_INDEX_NAME="",AZURE_SERVICE_NAME="",AZURE_INDEX_NAME="",AZURE_QUERY_KEY="",BAIDU_API_ID="",SEARCH_SERVICE="hexo",ROOT="/";ROOT.endsWith("/")||(ROOT+="/")</script><script src="/js/search.js"></script><script src="/js/app.js"></script><script>setLoadingBarProgress(100)</script></body>